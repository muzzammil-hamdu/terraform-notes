In Terraform, a data source is a way to query and retrieve information from external systems or existing infrastructure that Terraform itself doesn’t manage directly. It allows us to reference cloud resources, APIs, or other Terraform configurations to make our setup more dynamic and reusable.
Example Code Breakdown
data "local_file" "d1" {
  filename = path
}

resource "local_file" "f1" {
  filename = "a1.txt"
  content  = data.local_file.d1.content
}
Line by Line Explanation
•	data "local_file" "d1" { ... }
o	This is a data source of type local_file, named d1.
o	It is read-only: it does not create or modify files just reads the file at the path we provide (replace path with our actual file path).
o	Inside, filename = path means it will read the file at the given path.
•	resource "local_file" "f1" { ... }
o	This defines a resource that Terraform will manage and create, named f1.
o	filename = "a1.txt" tells Terraform to create a file named a1.txt.
o	content = data.local_file.d1.content uses the content read from the data source (the content of the file at path) as the content for the new file a1.txt.
What Does This Achieve?
•	data "local_file" "d1" { ... }
Reads content from an existing file that is not managed by Terraform fetching information, not creating or changing anything.
•	resource "local_file" "f1" { ... }
Creates (or manages) a file, and fills it with the content obtained from the data source.
Key Concepts
•	Data source (data):
o	Only reads existing data.
o	Useful when we want to use information or content from infrastructure or files not managed by the current Terraform config.

•	Resource (resource):
o	Terraform creates and manages this.
o	Can use values from data sources to influence what it creates.
Suppose we have a template or configuration file generated by another process, and we want to use its content as input for a new resource in Terraform. You'd use a data "local_file" block to read that file, then reference it in a resource to copy or use its contents elsewhere.
Summary Table
Block Type	Purpose	Example Usage
Data	Fetches info from existing, unmanaged resources	Read content of a file not created by Terraform (data "local_file")
Resource	Manages new/modified infrastructure or files	Create a new file with content from a data source
Bottom line:
•	Data sources are read-only views into existing infrastructure or files.
•	You use them to import or reference external information in our Terraform code, but we don’t manage (create/delete/update) these items directly via Terraform.
•	Then, you can use the data they fetch within other Terraform-managed resources as needed.
Workspace
A workspace in Terraform is a feature that allows us to use the same set of Terraform configuration files to manage multiple distinct sets of infrastructure resources, each with its own separate state. Workspaces are mainly useful for environment isolation, such as creating separate “dev”, “staging”, and “prod” deployments, all from the same codebase, while keeping their resource states independent.
Key Points About Terraform Workspaces
•	State isolation: Each workspace has its own Terraform state file. This means changes made in one workspace do not affect the resources managed in another.
•	Same code, different environments: By switching workspaces, you can deploy the same infrastructure configuration to multiple environments without making changes to the Terraform code.
•	Names: Terraform comes with a default workspace named default. We can create additional workspaces as needed.
Workspace Commands
•	List workspaces:
terraform workspace list
•	Create a new workspace:
terraform workspace new dev

•	Switch to another workspace:
terraform workspace select prod
•	Show current workspace:
terraform workspace show
Example Scenario
Suppose we want to use the same Terraform configuration to set up infrastructure for both testing and production. Here’s how you’ll use workspaces:
1.	Initialize the project and create workspaces:
terraform init
terraform workspace new test
terraform workspace new prod
2.	Switch between workspaces:
terraform workspace select test
terraform apply   # Applies configuration in 'test' workspace

terraform workspace select prod
terraform apply   # Applies configuration in 'prod' workspace
3.	Reference the workspace in configuration (optional):
We can make our resources conditional or parameterized based on the workspace name:
resource "aws_instance" "example" {
  count         = terraform.workspace == "prod" ? 3 : 1
  instance_type = "t2.micro"
  ami           = "ami-abc123"
}
Here, we get a single instance in all environments except “prod”, where three are created.
When to Use Workspaces
•	If we need truly isolated environments (separate state, independent lifecycles) from the same Terraform codebase.
•	When we want to avoid maintaining multiple copies of nearly identical Terraform files for each deployment environment.

